<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Compukit UK101 Simulator - Sample Programs</title>
</head>
<body>
<table border="2" frame="box" rules="none" cellpadding="5" width="100%">
<tr align="center"><td><img src="image/uk101.gif" alt="UK101"/></td></tr>
</table>
<h1>Sample Programs and Tapes</h1>
<p>The following sample assembler programs and tapes are provided:</p>
<ul compact>
<li><a href="#hello1">Hello World</a></li>
<li><a href="#charset">Character Set</a></li>
<li><a href="#nytaxi">New York Taxi</a></li>
<li><a href="#hectic">Hectic</a></li>
<li><a href="#exmon">Extended Monitor</a></li>
<li><a href="#invade">Space Invaders</a></li>
</ul>
<p>In addition this page provides some notes about the 
<a href="#format">binary and ASCII tape formats</a> used by the 
simulator and details of how to 
<a href="#decode">recover programs from cassette tapes</a>.</p> 
<p>Note: <i>Where indicated (using a cassette image) some of these sample 
programs and tapes are recovered from original software.
I do not own the copyrights for these recovered programs and so I sincerely
hope no one will mind them being included in this package.
If any of the original copyright owners object, please contact me at 
the email address at the bottom of the page and I will gladly remove 
anything that should not be here.</i></p>
<hr>
<h2 id="hello1">Hello World</h2>
<table frame="box" rules="all" cellspacing="0" cellpadding="4">
<tr><td><b>Source Code</b></td>
<td><a href="../samples/basic/hello.basic"><samp>samples/basic/hello1.basic</samp></a></td></tr>
</table>
<p>This is a very simple &quot;hello world&quot; BASIC program.
This program is used in the <a href="quickstart.html">quick start guide</a>.</p>
<p>This should be loaded as a BASIC program by typing the <code>LOAD</code> 
command in BASIC and playing the tape.</p>
<hr>
<h2 id="charset">Character Set</h2>
<table frame="box" rules="all" cellspacing="0" cellpadding="4">
<tr><td><b>Source Code</b></td>
<td><a href="../samples/basic/charset.basic"><samp>samples/basic/charset.basic</samp></a></td></tr>
</table>
<p>This is the program from page 38 of the 
<a href="http://uk101.sourceforge.net/docs/pdf/manual.pdf">manual</a> 
which can be used to display most of the character set of the machine.
It is not quite the same as the listing in the manual, as that listing
actually contains a couple of bugs and also needed some changes to work
correctly with the New Monitor.</p>
<p>This should be loaded as a BASIC program by typing the <code>LOAD</code> 
command in BASIC and playing the tape.</p>
<hr>
<h2 id="nytaxi">New York Taxi</h2>
<table frame="void"><tr valign="top">
<td><img src="image/tapesamp.jpg" alt="Sample Tape"/ align="left"/></td>
<td>
<table frame="box" rules="all" cellspacing="0"cellpadding="4">
<tr><td><b>Source Code</b></td>
<td><a href="../samples/basic/nytaxi.basic"><samp>samples/basic/nytaxi.basic</samp></a></td></tr>
</table>
</td></tr></table>
<br clear="left">
<p>This is a game that was provided on a sample tape that came with the original
machine.</p>
<p>This should be loaded as a BASIC program by typing the <code>LOAD</code> 
command in BASIC and playing the tape.
You should set the keyboard to <a href="operation.html#kbmode">raw mode</a>
to play the game.</p>
<hr>
<h2 id="hectic">Hectic</h2>
<table frame="void"><tr valign="top">
<td><img src="image/tapesamp.jpg" alt="Sample Tape" align="left"/></td>
<td>
<table frame="box" rules="all" cellspacing="0"cellpadding="4">
<tr>
<td><b>Source Code</b></td>
<td><a href="../samples/basic/hectic.basic"><samp>samples/basic/hectic.basic</samp></a></td></tr>
</table>
</td></tr></table>
<br clear="left">
<p>This is a game that was provided on a sample tape that came with the original
machine.</p>
<p>This should be loaded as a BASIC program by typing the <code>LOAD</code> 
command in BASIC and playing the tape.
You should set the keyboard to <a href="operation.html#kbmode">raw mode</a>
to play the game.</p>
<hr>
<h2 id="exmon">Extended Monitor</h2>
<table frame="void"><tr valign="top">
<td><img src="image/tapeex.jpg" alt="Sample Tape" align="left"/></td>
<td>
<table frame="box" rules="all" cellspacing="0"cellpadding="4">
<tr>
<td><b>Program Tape</b></td>
<td><samp>samples/tapes/exmon.tape</samp></td></tr>
</table>
</td></tr></table>
<br clear="left">
<p>This is the <i>Extended Monitor</i> that was provided on a sample tape 
that came with the original machine.
The extended monitor provided some extra function to help with writing 
and debugging simple machine code programs.</p>
<p>Details of the extended monitor can be found on its 
<a href="http://uk101.sourceforge.net/docs/pdf/exmon.pdf">instruction sheet</a>.</p>
<p>The extended monitor is a machine code program and needs to be loaded
through the Monitor, not as a BASIC program.
To do this first reset the machine then select <i>M</i> to enter the 
monitor, press the <i>L</i> key to begin loading and play the tape.
The extended monitor first loads a short checksum loader routine then
loads the rest of itself in checksum format.</p>
<hr>
<h2 id="invade">Space Invaders</h2>
<table frame="void"><tr valign="top">
<td><img src="image/tapeinv.jpg" alt="Invaders Tape" align="left"/></td>
<td>
<table frame="box" rules="all" cellspacing="0"cellpadding="4">
<tr><td><b>Program Tape</b></td>
<td><samp>samples/tapes/invaders.tape</samp></td></tr>
</table>
</td></tr></table>
<br clear="left">
<p>This is a copy of Premier Publication's excellent <i>Invaders</i>
space invaders game.</p>
<p>Invaders is a machine code program and needs to be loaded
through the Monitor, not as a BASIC program.
To do this first reset the machine then select <i>M</i> to enter the 
monitor, press the <i>L</i> key to begin loading and play the tape.
Once the game is loaded you can reset the machine and perform a
<a href="quickstart.html#boot">warm start</a> to restart it at
any time.</p>
<p>The game was intended to be played on a standard 1Mhz processor, 
if you have over-clocked the processor (see <a href="config.html#config">
system configuration</a>) it may run too fast.
Some old notes I have suggest that location $0F69 defines the game speed
with the default value being 20 - on a 2MHz machine this might be best 
changed to 40, it says.</p>
<p>To move the laser the <i>CTRL</i> is used to go left and the 
<i>left-SHIFT</i> key is used to go right.
On a real UK101 the CTRL-key is above the SHIFT-key so CTRL-for-left
and SHIFT-for-right makes sense.
Unfortunately these keys are the other way up on a PC keyboard so
this is not ideal!
I once knew some locations to patch to change these keys, but I can no
longer find those notes - sorry! 
You should set the keyboard to <a href="operation.html#kbmode">raw mode</a>
to play the game.</p>
<hr>
<h2 id="format">Binary and ASCII Tape Formats</h2>
<p>When the UK101 write data to a cassette tape it was written as a 
series of bytes.
Although most of the bytes that were written were standard ASCII
characters, the tapes would include some control characters,
some padding NUL (0x00) characters and possibly some bytes
whose values were outside the range of the standard character
set.
If these tapes are saved as PC files, the resulting file is not
guaranteed to be viewable on the PC and can probably not 
be successfully edited using standard PC editors without some
data corruption.</p>
<p>To help overcome these problems the simulator allows tapes to
be stored in one of two formats:</p>
<dl>
<dt><i>Binary</i></dt>
<dd>This the raw bytes format as would have been stored on a real
cassette tape.
If you recover a program or data from an old cassette tape it
will be in <i>binary</i> format.
<p>All the sample BASIC programs are in <i>ASCII</i> format and
have a file extension of <code>.basic</code>.</p></dd>
<dt><i>ASCII</i></dt>
<dd>This is a converted format that can be viewed and edited 
on the PC using any standard PC editor (for example Notepad
on Windows) without any data loss or data corruption.
<p>The conversion leaves any standard ASCII character unchanged,
it detects line ends and stores them as standard PC style
line ends and any other unrecognised byte is converted to an
escaped form <code>&#92;nn</code> where <code>nn</code> 
is a pair of hexadecimal digits.</p>
<p>All the sample machine code programs are in <i>binary</i> format
and have a file extenstion of <code>.tape</code>.</p></dd>
</dl>
<p>The simulator will correctly recognise and load tapes in both
<i>binary</i> or <i>ASCII</i> format and can save in either 
format.
If you are saving a BASIC program it would make sense to 
save in <i>ASCII</i> format (which is the default) as the 
resulting program can then be viewed and edited on the PC.
If you are saving a tape to potentially load back onto a 
real UK101 you will need to ensure it is in <i>binary</i>
format.</p>
<p>The utility programs <a href="utilities.html#tread">Tape Reader</a>
and <a href="utilities.html#twrite">Tape Writer</a> can be used
to quickly convert between the two formats.</p>
<h3 id="decode">Recovering Programs from Old Cassette Tapes</h3>
<p>If you have original UK101 programs on old cassette tapes it is 
usually possible to recover them on a PC so they can be loaded
and used with the simulator, provided the tapes are still playable
and provided you still have something to play them with.
This is done using an excellent piece of software written by Martin Ward 
that can decode the tape sounds to recover the original data bytes.
The process is something like this:
<ol>
<li>Download and install Martin Ward's
<a href="http://www.cse.dmu.ac.uk/~mward/martin/software/index.html#CUTS">
kansas city tape decoder</a>.
This is a perl script, so might require a few pre-requisites to be gathered
from elsewhere if you are a Windows user (like me).</li> 
<li>Attach a cassette tape player to the sound card in your PC.
I used an old (but good quality) 
<a href="http://www.walkmancentral.com/products/wm-dd">Sony Walkman</a>
and plugged the headphone output into the line-input on the PC (it's
best not to use the microphone input) and set the volume to about 7.</li>
<li>Play the tape and record the sound to a WAV file, setting to Mono
(rather than Stereo) if you can and sampling at the standard 44.1kHz.
I used <a href="http://audacity.sourceforge.net/">Audacity</a> to do
the recording and exporting as a WAV, remembering to trim off any 
unwanted blanks and noise at the beginning and end of the recording.
Make sure you save as an uncompressed WAV file, not an MP3.</li>
<li>Use the 
<a href="http://www.cse.dmu.ac.uk/~mward/martin/software/index.html#CUTS">
kansas city decoder</a> perl script to process the WAV 
file and create the decoded tape.
This might take a little while if the original tape was fairly
long.
Hopefully the data will be analysed, processed and extracted correctly - 
Martin's program did a fine job for all the tapes I have found and
tried.</li>
<li>The resulting file will be what I called <i>binary</i> format
(even though it may have a .txt extension).
This can be loaded directly into the simulator as either a BASIC
program or as machine code in the monitor or you can
use the <a href="utilities.html#tread">Tape Reader</a> utility to
convert the binary form to ASCII for easy viewing or editing on the PC.</li>
</ol>
<br><table border="1" frame="above" rules="none" width="100%">
<tr><td align="left">Tim Baldwin<br>December 2010
<br><a href="mailto:tjb101@tinymail.co.uk">tjb101@tinymail.co.uk</a></td>
<td align="right">Return to <a href="index.html">index</a>
<br><br>&copy; Tim Baldwin 2010</td></tr>
</table>
</body>
</html>
